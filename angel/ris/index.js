(function(w,e,o,l,L,c,i,B,$e,x){"use strict";const{openLazy:ve,hideActionSheet:Ee}=l.findByProps("openLazy","hideActionSheet");function P(r,a){if(r!=null&&a!=null)for(const t of Object.keys(a))typeof a[t]=="object"&&!Array.isArray(a[t])?(typeof r[t]!="object"&&(r[t]={}),P(r[t],a[t])):r[t]??(r[t]=a[t])}function y(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:r,new:a,updated:t,fix:u}}function p(){for(var r=arguments.length,a=new Array(r),t=0;t<r;t++)a[t]=arguments[t];return[...a]}var $=[y("1.0.0",p("Created the Plugin")),y("1.0.1",p("Added FuzzySearch")),y("1.0.2",p("Added Option to remove telemetry")),y("1.0.3",p("Added Option to toggle encoding for parsed URL","Url Parser will automatically encode URL before sending to RIS APIs"))].reverse();const{ScrollView:Ie,View:_,Text:Ae,TouchableOpacity:Le,TextInput:Be,Image:xe,Animated:Pe}=o.General,{FormLabel:_e,FormIcon:G,FormArrow:Te,FormRow:v,FormSwitch:Ce,FormSwitchRow:Ue,FormSection:ke,FormDivider:H,FormInput:Ne}=o.Forms,q=c.getAssetIDByName("ic_radio_square_checked_24px"),Y=c.getAssetIDByName("ic_radio_square_24px"),X=c.getAssetIDByName("ic_information_24px");c.getAssetIDByName("ic_info");const K=c.getAssetIDByName("premium_sparkles"),Q=c.getAssetIDByName("ic_sync_24px"),Z=c.getAssetIDByName("ic_progress_wrench_24px"),m=e.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:x.semanticColors.TEXT_NORMAL,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:x.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function b(r){return e.React.createElement(G,{style:{opacity:1},source:r})}function J(r){let{change:a,index:t,totalIndex:u}=r;const[n,s]=e.React.useState(!1),[j,S]=e.React.useState(!1);function d(h,F,I,g){return e.React.createElement(_,null,e.React.createElement(v,{label:F||"No Section",subLabel:I||null,leading:g&&b(g),style:[m.textHeader]}),h.map(function(A,f){return e.React.createElement(e.React.Fragment,null,e.React.createElement(v,{label:A,style:[m.textBody,m.rowLabel,m.border]}))}))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(o.ErrorBoundary,null,e.React.createElement(v,{label:a?.version,leading:t==0?b(q):b(Y),trailing:b(X),onPress:function(){s(!n)}}),n&&e.React.createElement(_,{style:[m.versionBG,m.border]},a?.new?.length>0&&d(a.new,"New","New stuffies",K),a?.updated?.length>0&&d(a.updated,"Changes","Update things",Q),a?.fix?.length>0&&d(a.fix,"Fixes","Me hate borken things",Z)),t==u.length-1?void 0:e.React.createElement(H,null)))}const{ScrollView:W,View:ee,Text:De,TouchableOpacity:ze,TextInput:Oe,Image:Ve,Animated:je}=o.General,{FormLabel:Me,FormIcon:te,FormArrow:Ge,FormRow:ae,FormSwitch:re,FormSwitchRow:He,FormSection:E,FormDivider:T,FormInput:qe,FormRadioRow:ne}=o.Forms;function C(r,a){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return{id:r,label:a,subLabel:t,icon:u,def:n}}const U=[C("removeTracking","Remove Telementry","Remove additional telemetry from url or site tracking"),C("encodeURL","Encode Parsed URL","encodeURL Before sending to RIS APIs")];function le(){return B.useProxy(i.storage),React.createElement(W,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(E,null,U.map(function(r,a){return React.createElement(React.Fragment,null,React.createElement(ae,{label:r?.label,subLabel:r?.subLabel,leading:r?.icon&&React.createElement(te,{style:{opacity:1},source:c.getAssetIDByName(r?.icon)}),trailing:React.createElement(re,{value:i.storage?.toggle[r?.id]||!1,onValueChange:function(t){return i.storage.toggle[r.id]=t}})}),a==U?.length-1?void 0:React.createElement(T,null))})),React.createElement(E,{title:"Services"},React.createElement(e.ReactNative.FlatList,{data:Object.entries(i.storage.services),ItemSeparatorComponent:T,renderItem:function(r){let{item:[a,t]}=r;return React.createElement(ne,{label:t.name,selected:t.enabled,onPress:function(){return t.enabled=!t.enabled}})}})),$&&React.createElement(E,{title:"Updates"},React.createElement(ee,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.3)"}},$.map(function(r,a){return React.createElement(J,{change:r,index:a,totalIndex:$.length})}))))}async function ie(r){if(r){const a=`https://api-next.fuzzysearch.net/v1/url?url=${r}`;let t=await(await fetch(a,{method:"GET",headers:{"x-api-key":"eluIOaOhIP1RXlgYetkcZCF8la7p3NoCPy8U0i8dKiT4xdIH",Accept:"application/json"}})).json();return t=="unavailable"&&(t=null),t}}const{ScrollView:Ye,View:Xe,Text:Ke,TouchableOpacity:Qe,TextInput:Ze,Image:Je,Animated:We}=o.General,{FormLabel:et,FormIcon:tt,FormArrow:oe,FormRow:se,FormSwitch:at,FormSwitchRow:rt,FormSection:nt,FormDivider:lt,FormInput:it}=o.Forms,{openURL:k}=l.findByProps("openURL","openDeeplink"),ce=e.stylesheet.createThemedStyleSheet({bg:{borderRadius:10,padding:10,margin:6,backgroundColor:"rgba(87, 187, 131, 0.25)"}});function ue(r){let{data:a}=r;const t={furaffinity:"https://www.furaffinity.net/view/",e621:"https://e621.net/posts/",weasyl:"https://www.weasyl.com/view/"};return e.React.createElement(e.React.Fragment,null,e.React.createElement(se,{label:a?.site,subLabel:`Uploaded/Created by ${a?.artists?.[0]}`,trailing:e.React.createElement(oe,null),style:[ce.bg],onPress:function(){a?.site?.toLowerCase?.()=="twitter"?k(`https://twitter.com/${a.artists?.[0]}/status/${a?.site_id_str}`):k(`${t[a?.site?.toLowerCase?.()]}${a?.site_id||a?.site_id_str}`)}}))}const{ScrollView:de,View:ge,Text:ot,TouchableOpacity:st,TextInput:ct,Image:ut,Animated:dt}=o.General,{FormLabel:gt,FormIcon:ft,FormArrow:mt,FormRow:N,FormSwitch:Rt,FormSwitchRow:ht,FormSection:yt,FormDivider:fe,FormInput:pt}=o.Forms,D=e.stylesheet.createThemedStyleSheet({baseBg:{margin:20,padding:25,backgroundColor:"rgba(55, 149, 225, 0.3)"},bg:{borderRadius:10,backgroundColor:"rgba(117, 227, 151, 0.35)"},border:{borderRadius:10}});function me(r){let{url:a}=r;B.useProxy(i.storage);const[t,u]=e.React.useState([]);if(Array.isArray(t)&&t?.length<1){let n=a;if(i.storage?.toggle?.removeTracking){const s=new URL(a);n=`${s.origin}${s.pathname}`}i.storage?.toggle?.encodeURL&&(n=encodeURIComponent(n)),ie(n).then(function(s){return u(s)})}return e.React.createElement(e.React.Fragment,null,e.React.createElement(de,null,e.React.createElement(ge,{style:[D.baseBg,D.border]},Array.isArray(t)&&t.length<1&&e.React.createElement(e.React.Fragment,null,e.React.createElement(N,{label:"Loading..."})),Array.isArray(t)?t?.map(function(n,s){return e.React.createElement(e.React.Fragment,null,e.React.createElement(ue,{data:n}),s==t.length-1?void 0:e.React.createElement(fe,null))}):e.React.createElement(e.React.Fragment,null,e.React.createElement(N,{label:"Sorry, Couldn't find any results!"})))))}const{openURL:Re}=l.findByProps("openURL","openDeeplink"),{FormRow:he}=o.Forms,ye=l.findByName("Icon")??l.findByProps("Sizes","compare"),z=l.findByProps("openLazy","hideActionSheet"),pe=e.React.createElement(ye,{source:c.getAssetIDByName("search")}),O=l.findByProps("push","pushLazy","pop"),be=l.findByProps("getRenderCloseButton")?.getRenderCloseButton??l.findByProps("getHeaderCloseButton")?.getHeaderCloseButton,Fe=l.findByName("Navigator")??l.findByProps("Navigator")?.Navigator,R={saucenao:{name:"SauceNAO",url:"https://saucenao.com/search.php?url=%s",enabled:!0},tracemoe:{name:"trace.moe (Anime)",url:"https://trace.moe/?url=%s",enabled:!0},iqdb:{name:"IQDB",url:"https://iqdb.org/?url=%s",enabled:!1},imgops:{name:"ImgOps",url:"https://imgops.com/%s",enabled:!1},tineye:{name:"TinEye",url:"https://tineye.com/search?url=%s",enabled:!1},google:{name:"Google Images",url:"https://www.google.com/searchbyimage?image_url=%s&safe=off&sbisrc=cr_1_5_2",enabled:!1},yandex:{name:"Yandex Images",url:"https://yandex.com/images/search?rpt=imageview&url=%s",enabled:!1},fuzzysearch:{name:"FuzzySearch (FurAffinity, Twitter)",enabled:!1,titlePage:"Fuzzysearch.net"}};P(i.storage,{services:R,toggle:{removeTracking:!1,encodeURL:!1}});const V=[];var we={onLoad:function(){V.push(L.before("openLazy",z,function(r){let[a,t]=r;t==="MediaShareActionSheet"&&a.then(function(u){const n=L.after("default",u,function(s,j){let[{syncer:S}]=s;e.React.useEffect(function(){return n()},[]);let d=S.sources[S.index.value];Array.isArray(d)&&(d=d[0]);const h=d.sourceURI??d.uri,F=j.props.children.props.children;if(F){const I=Object.keys(R).filter(function(g){return i.storage.services[g].enabled});F.push(I.map(function(g){const A=function(){if(R[g].url){let f=h;if(i.storage?.toggle?.removeTracking){const M=new URL(h);f=`${M.origin}${M.pathname}`}i.storage?.toggle?.encodeURL&&(f=encodeURIComponent(f)),Re(R[g].url.replace("%s",f))}else{const f=function(){return e.React.createElement(Fe,{initialRouteName:"ServicePage",goBackOnBackPress:!0,screens:{ServicePage:{title:R[g].titlePage,headerLeft:be?.(function(){return O.pop()}),render:function(){return e.React.createElement(me,{url:h})}}}})};z.hideActionSheet(),O.push(f)}};return e.React.createElement(e.React.Fragment,null,e.React.createElement(he,{leading:pe,label:R[g].name,onPress:A}))}))}})})}))},onUnload:function(){V.forEach(function(r){return r()})},settings:le};return w.default=we,Object.defineProperty(w,"__esModule",{value:!0}),w})({},vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.plugin,vendetta.storage,vendetta,vendetta.ui);
